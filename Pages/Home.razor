@page "/"

<PageTitle>Video Musicali</PageTitle>

<h1>🎬 Video casuale</h1>

<p>Clicca il pulsante per scoprire un video musicale!</p>

<button class="btn btn-primary" @onclick="ShowVideo">Mostra video</button>

@if (!string.IsNullOrEmpty(selectedVideoId))
{
    <div class="mt-3">
        <div class="ratio ratio-16x9">
            <iframe 
                src="https://www.youtube.com/embed/@selectedVideoId" 
                title="YouTube video player" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                referrerpolicy="strict-origin-when-cross-origin" 
                allowfullscreen>
            </iframe>
        </div>
        <div class="mt-2">
            <a href="https://www.youtube.com/watch?v=@selectedVideoId" 
               target="_blank" 
               class="btn btn-danger">
                📺 Guarda su YouTube
            </a>
        </div>
    </div>
}

@code {
    private VideoInfo[] videos = new[]
    {
        new VideoInfo("8aEuQBZrGy4", "Billie Eilish - bad guy"),
        new VideoInfo("1-L2QeBgXP0", "Eminem - Lose Yourself"),
        new VideoInfo("rZjCv8m72w4", "Dua Lipa - Levitating"),
        new VideoInfo("kJQP7kiw5Fk", "Despacito"),
        new VideoInfo("9bZkp7q19f0", "PSY - Gangnam Style")
    };

    private string? selectedVideoId;

    private void ShowVideo()
    {
        var random = new Random();
        var video = videos[random.Next(videos.Length)];
        selectedVideoId = video.Id;
    }

    private record VideoInfo(string Id, string Title);
}
