@page "/weather"

<PageTitle>Brano del Giorno</PageTitle>

<h1>🎧 Brano del giorno</h1>

<p>Clicca il pulsante e ascolta un brano Spotify a caso!</p>

<button class="btn btn-success" @onclick="ShowTrack">Ascolta</button>

@if (selectedTrack != null)
{
    <div class="mt-3">
        <iframe style="border-radius:12px" src="@selectedTrack" width="300" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
    </div>
}

@code {
    private string[] tracks = new[]
    {
        "<iframe data-testid=\"embed-iframe\" style=\"border-radius:12px\" src=\"https://open.spotify.com/embed/album/1SdiNqJzrQ6elJ8HbHoijJ?utm_source=generator\" width=\"100%\" height=\"352\" frameBorder=\"0\" allowfullscreen=\"\" allow=\"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture\" loading=\"lazy\"></iframe>",
        "<iframe data-testid=\"embed-iframe\" style=\"border-radius:12px\" src=\"https://open.spotify.com/embed/track/1ENVbao2JW8qU3mmBNUf6v?utm_source=generator\" width=\"100%\" height=\"352\" frameBorder=\"0\" allowfullscreen=\"\" allow=\"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture\" loading=\"lazy\"></iframe>",
        "<iframe data-testid=\"embed-iframe\" style=\"border-radius:12px\" src=\"https://open.spotify.com/embed/track/7tXS3GFgQg880jnVgjV6l9?utm_source=generator\" width=\"100%\" height=\"352\" frameBorder=\"0\" allowfullscreen=\"\" allow=\"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture\" loading=\"lazy\"></iframe>"
    };

    private string? selectedTrack;

    private void ShowTrack()
    {
        var random = new Random();
        selectedTrack = tracks[random.Next(tracks.Length)];
    }
}
